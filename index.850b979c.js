!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r);var o=r("eWrZJ"),s={},a=r("ds8z5"),l=r("8MBJY"),u=r("a2hTj"),c=r("hKHmD"),d=r("eYQtU"),p=r("1t1Wn"),f=r("8nrFW"),v=r("2MbLg"),h={},g=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof g?t:g,o=Object.create(r.prototype),s=new A(i||[]);return o._invoke=function(e,t,n){var i=d;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===v){if("throw"===r)throw o;return F()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=S(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=c(e,t,n);if("normal"===l.type){if(i=n.done?v:p,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=v,n.method="throw",n.arg=l.arg)}}}(e,n,s),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",v="completed",h={};function g(){}function m(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&i.call(k,o)&&(b=k);var O=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(r,o,s,a){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(l.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function S(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:F}}function F(){return{value:t,done:!0}}return m.prototype=y,l(O,"constructor",y),l(y,"constructor",m),m.displayName=l(y,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,a,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new x(u(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(O),l(O,a,"Generator"),l(O,o,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),h}},e}(h);try{regeneratorRuntime=g}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}s=function(){"use strict";var t=e(h).mark($);function n(e,t){e.split(/\s+/).forEach((function(e){t(e)}))}var i=function(){function t(){e(l)(this,t),this._events=void 0,this._events={}}return e(u)(t,[{key:"on",value:function(e,t){var i=this;n(e,(function(e){var n=i._events[e]||[];n.push(t),i._events[e]=n}))}},{key:"off",value:function(e,t){var i=this,r=arguments.length;0!==r?n(e,(function(e){if(1!==r){var n=i._events[e];void 0!==n&&(n.splice(n.indexOf(t),1),i._events[e]=n)}else delete i._events[e]})):this._events={}}},{key:"trigger",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var o=this;n(e,(function(e){var t=o._events[e];void 0!==t&&t.forEach((function(e){e.apply(o,i)}))}))}}]),t}();function r(t){return t.plugins={},function(n){e(d)(r,n);var i=e(v)(r);function r(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s;return e(l)(this,r),(s=i.call.apply(i,[this].concat(e(f)(n)))).plugins={names:[],settings:{},requested:{},loaded:{}},s}return e(u)(r,[{key:"initializePlugins",value:function(e){var t,n,i=this,r=[];if(Array.isArray(e))e.forEach((function(e){"string"==typeof e?r.push(e):(i.plugins.settings[e.name]=e.options,r.push(e.name))}));else if(e)for(t in e)e.hasOwnProperty(t)&&(i.plugins.settings[t]=e[t],r.push(t));for(;n=r.shift();)i.require(n)}},{key:"loadPlugin",value:function(e){var n=this,i=n.plugins,r=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=r.fn.apply(n,[n.plugins.settings[e]||{}]),i.names.push(e)}},{key:"require",value:function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]}}],[{key:"define",value:function(e,n){t.plugins[e]={name:e,fn:n}}}]),r}(t)}
/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */var o,s,g=function(e){return(e=e.filter(Boolean)).length<2?e[0]||"":1==k(e)?"["+e.join("")+"]":"(?:"+e.join("|")+")"},m=function(e){if(!b(e))return e.join("");var t="",n=0,i=function(){n>1&&(t+="{"+n+"}")};return e.forEach((function(r,o){r!==e[o-1]?(i(),t+=r,n=1):n++})),i(),t},y=function(e){var t=_(e);return g(t)},b=function(e){return new Set(e).size!==e.length},w=function(e){return(e+"").replace(RegExp("([\\$\\(\\)\\*\\+\\.\\?\\[\\]\\^\\{\\|\\}\\\\])","gu"),"\\$1")},k=function(e){return e.reduce((function(e,t){return Math.max(e,O(t))}),0)},O=function(e){return _(e).length},_=function(e){return Array.from(e)},x=function(e){if(1===e.length)return[[e]];var t=[],n=e.substring(1);return x(n).forEach((function(n){var i=n.slice(0);i[0]=e.charAt(0)+i[0],t.push(i),(i=n.slice(0)).unshift(e.charAt(0)),t.push(i)})),t},S=[[0,65535]],C="[̀-ͯ·ʾʼ]",I=3,A={},L={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(var F in L)for(var E=L[F]||"",T=0;T<E.length;T++){var P=E.substring(T,T+1);A[P]=F}var N=new RegExp(Object.keys(A).join("|")+"|"+C,"gu"),j=function(e){void 0===o&&(o=H(e||S))},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NFKD";return e.normalize(t)},V=function(e){return _(e).reduce((function(e,t){return e+D(t)}),"")},D=function(e){return e=q(e).toLowerCase().replace(N,(function(e){return A[e]||""})),q(e,"NFC")};function $(n){var i,r,o,s,a,l,u,c,d,f,v;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=!0,r=!1,o=void 0,t.prev=1,s=n[Symbol.iterator]();case 3:if(i=(a=s.next()).done){t.next=23;break}l=e(p)(a.value,2),u=l[0],c=l[1],d=u;case 6:if(!(d<=c)){t.next=20;break}if(f=String.fromCharCode(d),(v=V(f))!=f.toLowerCase()){t.next=11;break}return t.abrupt("continue",17);case 11:if(!(v.length>I)){t.next=13;break}return t.abrupt("continue",17);case 13:if(0!=v.length){t.next=15;break}return t.abrupt("continue",17);case 15:return t.next=17,{folded:v,composed:f,code_point:d};case 17:d++,t.next=6;break;case 20:i=!0,t.next=3;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(1),r=!0,o=t.t0;case 29:t.prev=29,t.prev=30,i||null==s.return||s.return();case 32:if(t.prev=32,!r){t.next=35;break}throw o;case 35:return t.finish(32);case 36:return t.finish(29);case 37:case"end":return t.stop()}}),t,null,[[1,25,29,37],[30,,32,36]])}var R=function(e){var t={},n=function(e,n){var i=t[e]||new Set,r=new RegExp("^"+y(i)+"$","iu");n.match(r)||(i.add(w(n)),t[e]=i)},i=!0,r=!1,o=void 0;try{for(var s,a=$(e)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n(l.folded,l.folded),n(l.folded,l.composed)}}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return t},H=function(e){var t=R(e),n={},i=[];for(var r in t){var o=t[r];o&&(n[r]=y(o)),r.length>1&&i.push(w(r))}i.sort((function(e,t){return t.length-e.length}));var a=g(i);return s=new RegExp("^"+a,"u"),n},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0;return e=e.map((function(e){return o[e]&&(n+=e.length),o[e]||e})),n>=t?m(e):""},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=Math.max(t,e.length-1),g(x(e).map((function(e){return B(e,t)})))},z=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length>1?1:0;return g(e.map((function(e){for(var i=[],r=t?e.length():e.length()-1,o=0;o<r;o++)i.push(M(e.substrs[o]||"",n));return m(i)})))},K=function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a.start==e.start&&a.end==e.end&&a.substrs.join("")===e.substrs.join("")){var l=e.parts,u=function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=l[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s.start===e.start&&s.substr===e.substr)return!1;if(1!=e.length&&1!=s.length){if(e.start<s.start&&e.end>s.start)return!0;if(s.start<e.start&&s.end>e.start)return!0}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return!1};if(!(a.parts.filter(u).length>0))return!0}}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return!1},G=function(){function t(){e(l)(this,t),this.parts=[],this.substrs=[],this.start=0,this.end=0}return e(u)(t,[{key:"add",value:function(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}},{key:"last",value:function(){return this.parts[this.parts.length-1]}},{key:"length",value:function(){return this.parts.length}},{key:"clone",value:function(e,n){var i=new t,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop(),s=!0,a=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;i.add(d)}}catch(e){a=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(a)throw l}}var p=n.substr.substring(0,e-o.start),f=p.length;return i.add({start:o.start,end:o.start+f,length:f,substr:p}),i}}]),t}(),Q=function(e){var t=function(t){var r=e.substring(t).match(s),o=e.substring(t,t+1),a=r?r[0]:null,l=[],u=new Set,c=!0,d=!1,p=void 0;try{for(var f,v=i[Symbol.iterator]();!(c=(f=v.next()).done);c=!0){var h=f.value,g=h.last();if(!g||1==g.length||g.end<=t)if(a){var m=a.length;h.add({start:t,end:t+m,length:m,substr:a}),u.add("1")}else h.add({start:t,end:t+1,length:1,substr:o}),u.add("2");else if(a){var y=h.clone(t,g),b=a.length;y.add({start:t,end:t+b,length:b,substr:a}),l.push(y)}else u.add("3")}}catch(e){d=!0,p=e}finally{try{c||null==v.return||v.return()}finally{if(d)throw p}}if(l.length>0){l=l.sort((function(e,t){return e.length()-t.length()}));var w=!0,k=!1,O=void 0;try{for(var _,x=l[Symbol.iterator]();!(w=(_=x.next()).done);w=!0){var S=_.value;K(S,i)||i.push(S)}}catch(e){k=!0,O=e}finally{try{w||null==x.return||x.return()}finally{if(k)throw O}}return"continue"}if(t>0&&1==u.size&&!u.has("3")){n+=z(i,!1);var C=new G,I=i[0];I&&C.add(I.last()),i=[C]}};j(),e=V(e);for(var n="",i=[new G],r=0;r<e.length;r++)t(r);return n+=z(i,!0)},U=function(e,t){if(e)return e[t]},J=function(e,t){if(e){for(var n,i=t.split(".");(n=i.shift())&&(e=e[n]););return e}},W=function(e,t,n){var i,r;return e?(e+="",null==t.regex||-1===(r=e.search(t.regex))?0:(i=t.string.length/e.length,0===r&&(i+=.5),i*n)):0},Y=function(e,t){var n=e[t];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(e[t]=[n])},X=function(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},Z=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=V(e+"").toLowerCase())>(t=V(t+"").toLowerCase())?1:t>e?-1:0},ee=function(){function t(n,i){e(l)(this,t),this.items=void 0,this.settings=void 0,this.items=n,this.settings=i||{diacritics:!0}}return e(u)(t,[{key:"tokenize",value:function(e,t,n){var i=this;if(!e||!e.length)return[];var r,o=[],s=e.split(/\s+/);return n&&(r=new RegExp("^("+Object.keys(n).map(w).join("|")+"):(.*)$")),s.forEach((function(e){var n,s=null,a=null;r&&(n=e.match(r))&&(s=n[1],e=n[2]),e.length>0&&(a=i.settings.diacritics?Q(e)||null:w(e))&&t&&(a="\\b"+a),o.push({string:e,regex:a?new RegExp(a,"iu"):null,field:s})})),o}},{key:"getScoreFunction",value:function(e,t){var n=this.prepareSearch(e,t);return this._getScoreFunction(n)}},{key:"_getScoreFunction",value:function(e){var t=e.tokens,n=t.length;if(!n)return function(){return 0};var i=e.options.fields,r=e.weights,o=i.length,s=e.getAttrFn;if(!o)return function(){return 1};var a=1===o?function(e,t){var n=i[0].field;return W(s(t,n),e,r[n]||1)}:function(e,t){var n=0;if(e.field){var i=s(t,e.field);!e.regex&&i?n+=1/o:n+=W(i,e,1)}else X(r,(function(i,r){n+=W(s(t,r),e,i)}));return n/o};return 1===n?function(e){return a(t[0],e)}:"and"===e.options.conjunction?function(e){var i,r=0,o=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if((i=a(d,e))<=0)return 0;r+=i}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return r/n}:function(e){var i=0;return X(t,(function(t){i+=a(t,e)})),i/n}}},{key:"getSortFunction",value:function(e,t){var n=this.prepareSearch(e,t);return this._getSortFunction(n)}},{key:"_getSortFunction",value:function(e){var t,n=[],i=this,r=e.options,o=!e.query&&r.sort_empty?r.sort_empty:r.sort;if("function"==typeof o)return o.bind(this);var s=function(t,n){return"$score"===t?n.score:e.getAttrFn(i.items[n.id],t)};if(o){var a=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var p=c.value;(e.query||"$score"!==p.field)&&n.push(p)}}catch(e){l=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw u}}}if(e.query){t=!0;var f=!0,v=!1,h=void 0;try{for(var g,m=n[Symbol.iterator]();!(f=(g=m.next()).done);f=!0)if("$score"===g.value.field){t=!1;break}}catch(e){v=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(v)throw h}}t&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((function(e){return"$score"!==e.field}));return n.length?function(e,t){var i,r,o=!0,a=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(r=d.field,i=("desc"===d.direction?-1:1)*Z(s(r,e),s(r,t)))return i}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return 0}:null}},{key:"prepareSearch",value:function(e,t){var n={},i=Object.assign({},t);if(Y(i,"sort"),Y(i,"sort_empty"),i.fields){Y(i,"fields");var r=[];i.fields.forEach((function(e){"string"==typeof e&&(e={field:e,weight:1}),r.push(e),n[e.field]="weight"in e?e.weight:1})),i.fields=r}return{options:i,query:e.toLowerCase().trim(),tokens:this.tokenize(e,i.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:i.nesting?J:U}}},{key:"search",value:function(e,t){var n,i,r=this;i=this.prepareSearch(e,t),t=i.options,e=i.query;var o=t.score||r._getScoreFunction(i);e.length?X(r.items,(function(e,r){n=o(e),(!1===t.filter||n>0)&&i.items.push({score:n,id:r})})):X(r.items,(function(e,t){i.items.push({score:1,id:t})}));var s=r._getSortFunction(i);return s&&i.items.sort(s),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i}}]),t}(),te=function(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},ne=function(e){if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(ie(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},ie=function(e){return"string"==typeof e&&e.indexOf("<")>-1},re=function(e){return e.replace(/['"\\]/g,"\\$&")},oe=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)},se=function(e,t){Object.assign(e.style,t)},ae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=ue(n);(e=ce(e)).map((function(e){r.map((function(t){e.classList.add(t)}))}))},le=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=ue(n);(e=ce(e)).map((function(e){r.map((function(t){e.classList.remove(t)}))}))},ue=function(e){var t=[];return te(e,(function(e){"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))})),t.filter(Boolean)},ce=function(e){return Array.isArray(e)||(e=[e]),e},de=function(e,t,n){if(!n||n.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},pe=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>0?e[e.length-1]:e[0]},fe=function(e){return 0===Object.keys(e).length},ve=function(e,t){if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n},he=function(e,t){te(t,(function(t,n){null==t?e.removeAttribute(n):e.setAttribute(n,""+t)}))},ge=function(e,t){e.parentNode&&e.parentNode.replaceChild(t,e)},me=function(e,t){if(null!==t){if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}var n=function(e){var n=e.data.match(t);if(n&&e.data.length>0){var i=document.createElement("span");i.className="highlight";var r=e.splitText(n.index);r.splitText(n[0].length);var o=r.cloneNode(!0);return i.appendChild(o),ge(r,i),1}return 0},i=function(e){1!==e.nodeType||!e.childNodes||/(script|style)/i.test(e.tagName)||"highlight"===e.className&&"SPAN"===e.tagName||Array.from(e.childNodes).forEach((function(e){r(e)}))},r=function(e){return 3===e.nodeType?n(e):(i(e),0)};r(e)}},ye=function(e){var t=e.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,(function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()}))},be=65,we=13,ke=27,Oe=37,_e=38,xe=39,Se=40,Ce=8,Ie=46,Ae=9,Le="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",Fe={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}},Ee=function(e){return null==e?null:Te(e)},Te=function(e){return"boolean"==typeof e?e?"1":"0":e+""},Pe=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Ne=function(e,t){return t>0?setTimeout(e,t):(e.call(null),null)},je=function(e,t){var n;return function(i,r){var o=this;n&&(o.loading=Math.max(o.loading-1,0),clearTimeout(n)),n=setTimeout((function(){n=null,o.loadedSearches[i]=!0,e.call(o,i,r)}),t)}},qe=function(e,t,n){var i,r=e.trigger,o={};e.trigger=function(){var n=arguments[0];if(-1===t.indexOf(n))return r.apply(e,arguments);o[n]=arguments},n.apply(e,[]),e.trigger=r;var s=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)(i=u.value)in o&&r.apply(e,o[i])}catch(e){a=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(a)throw l}}},Ve=function(e){return{start:e.selectionStart||0,length:(e.selectionEnd||0)-(e.selectionStart||0)}},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(e.preventDefault(),t&&e.stopPropagation())},$e=function(e,t,n,i){e.addEventListener(t,n,i)},Re=function(e,t){return!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0)},He=function(e,t){var n=e.getAttribute("id");return n||(e.setAttribute("id",t),t)},Be=function(e){return e.replace(/[\\"']/g,"\\$&")},Me=function(e,t){t&&e.append(t)};function ze(e,t){var n=Object.assign({},Fe,t),i=n.dataAttr,r=n.labelField,o=n.valueField,s=n.disabledField,a=n.optgroupField,l=n.optgroupLabelField,u=n.optgroupValueField,c=e.tagName.toLowerCase(),d=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!d&&!n.allowEmptyOption){var p=e.querySelector('option[value=""]');p&&(d=p.textContent)}var f={placeholder:d,options:[],optgroups:[],items:[],maxItems:null},v=function(){var t,c=f.options,d={},p=1,v=0,h=function(e){var t=Object.assign({},e.dataset),n=i&&t[i];return"string"==typeof n&&n.length&&(t=Object.assign(t,JSON.parse(n))),t},g=function(e,t){var i=Ee(e.value);if(null!=i&&(i||n.allowEmptyOption)){if(d.hasOwnProperty(i)){if(t){var l=d[i][a];l?Array.isArray(l)?l.push(t):d[i][a]=[l,t]:d[i][a]=t}}else{var u=h(e);u[r]=u[r]||e.textContent,u[o]=u[o]||i,u[s]=u[s]||e.disabled,u[a]=u[a]||t,u.$option=e,u.$order=u.$order||++v,d[i]=u,c.push(u)}e.selected&&f.items.push(i)}},m=function(e){var t,n;(n=h(e))[l]=n[l]||e.getAttribute("label")||"",n[u]=n[u]||p++,n[s]=n[s]||e.disabled,n.$order=n.$order||++v,f.optgroups.push(n),t=n[u],te(e.children,(function(e){g(e,t)}))};f.maxItems=e.hasAttribute("multiple")?null:1,te(e.children,(function(e){"optgroup"===(t=e.tagName.toLowerCase())?m(e):"option"===t&&g(e)}))},h=function(){var t=e.getAttribute(i);if(t)f.options=JSON.parse(t),te(f.options,(function(e){f.items.push(e[o])}));else{var s=e.value.trim()||"";if(!n.allowEmptyOption&&!s.length)return;var a=s.split(n.delimiter);te(a,(function(e){var t={};t[r]=e,t[o]=e,f.options.push(t)})),f.items=a}};return"select"===c?v():h(),Object.assign({},Fe,f,t)}var Ke=0,Ge=function(t){e(d)(i,t);var n=e(v)(i);function i(t,r){var o,s;e(l)(this,i),(o=n.call(this)).control_input=void 0,o.wrapper=void 0,o.dropdown=void 0,o.control=void 0,o.dropdown_content=void 0,o.focus_node=void 0,o.order=0,o.settings=void 0,o.input=void 0,o.tabIndex=void 0,o.is_select_tag=void 0,o.rtl=void 0,o.inputId=void 0,o._destroy=void 0,o.sifter=void 0,o.isOpen=!1,o.isDisabled=!1,o.isReadOnly=!1,o.isRequired=void 0,o.isInvalid=!1,o.isValid=!0,o.isLocked=!1,o.isFocused=!1,o.isInputHidden=!1,o.isSetup=!1,o.ignoreFocus=!1,o.ignoreHover=!1,o.hasOptions=!1,o.currentResults=void 0,o.lastValue="",o.caretPos=0,o.loading=0,o.loadedSearches={},o.activeOption=null,o.activeItems=[],o.optgroups={},o.options={},o.userOptions={},o.items=[],o.refreshTimeout=null,Ke++;var u=ne(t);if(u.tomselect)throw new Error("Tom Select already initialized on this element");u.tomselect=e(a)(o),s=(window.getComputedStyle&&window.getComputedStyle(u,null)).getPropertyValue("direction");var d=ze(u,r);o.settings=d,o.input=u,o.tabIndex=u.tabIndex||0,o.is_select_tag="select"===u.tagName.toLowerCase(),o.rtl=/rtl/i.test(s),o.inputId=He(u,"tomselect-"+Ke),o.isRequired=u.required,o.sifter=new ee(o.options,{diacritics:d.diacritics}),d.mode=d.mode||(1===d.maxItems?"single":"multi"),"boolean"!=typeof d.hideSelected&&(d.hideSelected="multi"===d.mode),"boolean"!=typeof d.hidePlaceholder&&(d.hidePlaceholder="multi"!==d.mode);var p=d.createFilter;"function"!=typeof p&&("string"==typeof p&&(p=new RegExp(p)),p instanceof RegExp?d.createFilter=function(e){return p.test(e)}:d.createFilter=function(e){return o.settings.duplicates||!o.options[e]}),o.initializePlugins(d.plugins),o.setupCallbacks(),o.setupTemplates();var f,v=ne("<div>"),h=ne("<div>"),g=o._render("dropdown"),m=ne('<div role="listbox" tabindex="-1">'),y=o.input.getAttribute("class")||"",b=d.mode;return ae(v,d.wrapperClass,y,b),ae(h,d.controlClass),Me(v,h),ae(g,d.dropdownClass,b),d.copyClassesToDropdown&&ae(g,y),ae(m,d.dropdownContentClass),Me(g,m),ne(d.dropdownParent||v).appendChild(g),ie(d.controlInput)?(f=ne(d.controlInput),X(["autocorrect","autocapitalize","autocomplete","spellcheck"],(function(t){u.getAttribute(t)&&he(f,e(c)({},t,u.getAttribute(t)))})),f.tabIndex=-1,h.appendChild(f),o.focus_node=f):d.controlInput?(f=ne(d.controlInput),o.focus_node=f):(f=ne("<input/>"),o.focus_node=h),o.wrapper=v,o.dropdown=g,o.dropdown_content=m,o.control=h,o.control_input=f,o.setup(),o}return e(u)(i,[{key:"setup",value:function(){var e=this,t=e.settings,n=e.control_input,i=e.dropdown,r=e.dropdown_content,o=e.wrapper,s=e.control,a=e.input,l=e.focus_node,u={passive:!0},c=e.inputId+"-ts-dropdown";he(r,{id:c}),he(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});var d=He(l,e.inputId+"-ts-control"),p="label[for='"+re(e.inputId)+"']",f=document.querySelector(p),v=e.focus.bind(e);if(f){$e(f,"click",v),he(f,{for:d});var h=He(f,e.inputId+"-ts-label");he(l,{"aria-labelledby":h}),he(r,{"aria-labelledby":h})}if(o.style.width=a.style.width,e.plugins.names.length){var g="plugin-"+e.plugins.names.join(" plugin-");ae([o,i],g)}(null===t.maxItems||t.maxItems>1)&&e.is_select_tag&&he(a,{multiple:"multiple"}),t.placeholder&&he(n,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+w(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=je(t.load,t.loadThrottle)),$e(i,"mousemove",(function(){e.ignoreHover=!1})),$e(i,"mouseenter",(function(t){var n=de(t.target,"[data-selectable]",i);n&&e.onOptionHover(t,n)}),{capture:!0}),$e(i,"click",(function(t){var n=de(t.target,"[data-selectable]");n&&(e.onOptionSelect(t,n),De(t,!0))})),$e(s,"click",(function(t){var i=de(t.target,"[data-ts-item]",s);i&&e.onItemSelect(t,i)?De(t,!0):""==n.value&&(e.onClick(),De(t,!0))})),$e(l,"keydown",(function(t){return e.onKeyDown(t)})),$e(n,"keypress",(function(t){return e.onKeyPress(t)})),$e(n,"input",(function(t){return e.onInput(t)})),$e(l,"blur",(function(t){return e.onBlur(t)})),$e(l,"focus",(function(t){return e.onFocus(t)})),$e(n,"paste",(function(t){return e.onPaste(t)}));var m=function(t){var r=t.composedPath()[0];if(!o.contains(r)&&!i.contains(r))return e.isFocused&&e.blur(),void e.inputState();r==n&&e.isOpen?t.stopPropagation():De(t,!0)},y=function(){e.isOpen&&e.positionDropdown()};$e(document,"mousedown",m),$e(window,"scroll",y,u),$e(window,"resize",y,u),this._destroy=function(){document.removeEventListener("mousedown",m),window.removeEventListener("scroll",y),window.removeEventListener("resize",y),f&&f.removeEventListener("click",v)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,$e(a,"invalid",(function(){e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())})),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,a.disabled?e.disable():a.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),ae(a,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),!0===t.preload&&e.preload()}},{key:"setupOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this;this.addOptions(e),X(t,(function(e){n.registerOptionGroup(e)}))}},{key:"setupTemplates",value:function(){var e=this,t=e.settings.labelField,n=e.settings.optgroupLabelField,i={optgroup:function(e){var t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,n){return"<div>"+n(e[t])+"</div>"},item:function(e,n){return"<div>"+n(e[t])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"},no_results:function(){return'<div class="no-results">No results found</div>'},loading:function(){return'<div class="spinner"></div>'},not_loading:function(){},dropdown:function(){return"<div></div>"}};e.settings.render=Object.assign({},i,e.settings.render)}},{key:"setupCallbacks",value:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)(t=this.settings[n[e]])&&this.on(e,t)}},{key:"sync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?e.settings:ze(e.input,{delimiter:e.settings.delimiter});e.setupOptions(t.options,t.optgroups),e.setValue(t.items||[],!0),e.lastQuery=null}},{key:"onClick",value:function(){var e=this;if(e.activeItems.length>0)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}},{key:"onMouseDown",value:function(){}},{key:"onChange",value:function(){oe(this.input,"input"),oe(this.input,"change")}},{key:"onPaste",value:function(e){var t=this,n=this;n.isInputHidden||n.isLocked?De(e):n.settings.splitOn&&setTimeout((function(){var e=t,i=n.inputValue();if(i.match(n.settings.splitOn)){var r=i.trim().split(n.settings.splitOn);X(r,(function(t){Ee(t)&&(e.options[t]?n.addItem(t):n.createItem(t))}))}}),0)}},{key:"onKeyPress",value:function(e){var t=this;if(!t.isLocked){var n=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&n===t.settings.delimiter?(t.createItem(),void De(e)):void 0}De(e)}},{key:"onKeyDown",value:function(e){var t=this;if(t.ignoreHover=!0,t.isLocked)e.keyCode!==Ae&&De(e);else{switch(e.keyCode){case be:if(Re(Le,e)&&""==t.control_input.value)return De(e),void t.selectAll();break;case ke:return t.isOpen&&(De(e,!0),t.close()),void t.clearActiveItems();case Se:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){var n=t.getAdjacent(t.activeOption,1);n&&t.setActiveOption(n)}return void De(e);case _e:if(t.activeOption){var i=t.getAdjacent(t.activeOption,-1);i&&t.setActiveOption(i)}return void De(e);case we:return void(t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),De(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&De(e));case Oe:return void t.advanceSelection(-1,e);case xe:return void t.advanceSelection(1,e);case Ae:return void(t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),De(e)),t.settings.create&&t.createItem()&&De(e)));case Ce:case Ie:return void t.deleteSelection(e)}t.isInputHidden&&!Re(Le,e)&&De(e)}}},{key:"onInput",value:function(e){var t=this;if(!this.isLocked){var n=this.inputValue();this.lastValue!==n&&(this.lastValue=n,""!=n?(this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=Ne((function(){t.refreshTimeout=null,t._onInput()}),this.settings.refreshThrottle)):this._onInput())}}},{key:"_onInput",value:function(){var e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}},{key:"onOptionHover",value:function(e,t){this.ignoreHover||this.setActiveOption(t,!1)}},{key:"onFocus",value:function(e){var t=this,n=t.isFocused;if(t.isDisabled||t.isReadOnly)return t.blur(),void De(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),n||t.trigger("focus"),t.activeItems.length||(t.inputState(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}},{key:"onBlur",value:function(e){if(!1!==document.hasFocus()){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var n=function(){t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,n):n()}}}},{key:"onOptionSelect",value:function(e,t){var n,i=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?i.createItem(null,(function(){i.settings.closeAfterSelect&&i.close()})):void 0!==(n=t.dataset.value)&&(i.lastQuery=null,i.addItem(n),i.settings.closeAfterSelect&&i.close(),!i.settings.hideSelected&&e.type&&/click/.test(e.type)&&i.setActiveOption(t)))}},{key:"canSelect",value:function(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}},{key:"onItemSelect",value:function(e,t){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(De(e),n.setActiveItem(t,e),!0)}},{key:"canLoad",value:function(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}},{key:"load",value:function(e){var t=this;if(t.canLoad(e)){ae(t.wrapper,t.settings.loadingClass),t.loading++;var n=t.loadCallback.bind(t);t.settings.load.call(t,e,n)}}},{key:"loadCallback",value:function(e,t){var n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(e,t),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||le(n.wrapper,n.settings.loadingClass),n.trigger("load",e,t)}},{key:"preload",value:function(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}},{key:"setTextboxValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.control_input;t.value!==e&&(t.value=e,oe(t,"update"),this.lastValue=e)}},{key:"getValue",value:function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}},{key:"setValue",value:function(e,t){var n=this;qe(this,t?[]:["change"],(function(){n.clear(t),n.addItems(e,t)}))}},{key:"setMaxItems",value:function(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}},{key:"setActiveItem",value:function(e,t){var n,i,r,o,s,a,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.inputState());if("click"===(n=t&&t.type.toLowerCase())&&Re("shiftKey",t)&&l.activeItems.length){for(a=l.getLastActive(),(r=Array.prototype.indexOf.call(l.control.children,a))>(o=Array.prototype.indexOf.call(l.control.children,e))&&(s=r,r=o,o=s),i=r;i<=o;i++)e=l.control.children[i],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);De(t)}else"click"===n&&Re(Le,t)||"keydown"===n&&Re("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.inputState(),l.isFocused||l.focus()}}},{key:"setActiveItemClass",value:function(e){var t=this,n=t.control.querySelector(".last-active");n&&le(n,"last-active"),ae(e,"active last-active"),t.trigger("item_select",e),-1==t.activeItems.indexOf(e)&&t.activeItems.push(e)}},{key:"removeActiveItem",value:function(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),le(e,"active")}},{key:"clearActiveItems",value:function(){le(this.activeItems,"active"),this.activeItems=[]}},{key:"setActiveOption",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,he(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),he(e,{"aria-selected":"true"}),ae(e,"active"),t&&this.scrollToOption(e)))}},{key:"scrollToOption",value:function(e,t){if(e){var n=this.dropdown_content,i=n.clientHeight,r=n.scrollTop||0,o=e.offsetHeight,s=e.getBoundingClientRect().top-n.getBoundingClientRect().top+r;s+o>i+r?this.scroll(s-i+o,t):s<r&&this.scroll(s,t)}}},{key:"scroll",value:function(e,t){var n=this.dropdown_content;t&&(n.style.scrollBehavior=t),n.scrollTop=e,n.style.scrollBehavior=""}},{key:"clearActiveOption",value:function(){this.activeOption&&(le(this.activeOption,"active"),he(this.activeOption,{"aria-selected":null})),this.activeOption=null,he(this.focus_node,{"aria-activedescendant":null})}},{key:"selectAll",value:function(){var e=this;if("single"!==e.settings.mode){var t=e.controlChildren();t.length&&(e.inputState(),e.close(),e.activeItems=t,X(t,(function(t){e.setActiveItemClass(t)})))}}},{key:"inputState",value:function(){var e=this;e.control.contains(e.control_input)&&(he(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&he(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}},{key:"inputValue",value:function(){return this.control_input.value.trim()}},{key:"focus",value:function(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout((function(){e.ignoreFocus=!1,e.onFocus()}),0))}},{key:"blur",value:function(){this.focus_node.blur(),this.onBlur()}},{key:"getScoreFunction",value:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}},{key:"getSearchOptions",value:function(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}},{key:"search",value:function(e){var t,n,i=this,r=this.getSearchOptions();if(i.settings.score&&"function"!=typeof(n=i.settings.score.call(i,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==i.lastQuery?(i.lastQuery=e,t=i.sifter.search(e,Object.assign(r,{score:n})),i.currentResults=t):t=Object.assign({},i.currentResults),i.settings.hideSelected&&(t.items=t.items.filter((function(e){var t=Ee(e.id);return!(t&&-1!==i.items.indexOf(t))}))),t}},{key:"refreshOptions",value:function(){var t,n,i,r,o,s,a,l,u,c,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],f={},v=[],h=this,g=h.inputValue(),m=g===h.lastQuery||""==g&&null==h.lastQuery,y=h.search(g),b=null,w=h.settings.shouldOpen||!1,k=h.dropdown_content;m&&(b=h.activeOption)&&(u=b.closest("[data-group]")),r=y.items.length,"number"==typeof h.settings.maxOptions&&(r=Math.min(r,h.settings.maxOptions)),r>0&&(w=!0);var O=function(e,t){var n=f[e];if(void 0!==n){var i=v[n];if(void 0!==i)return[n,i.fragment]}var r=document.createDocumentFragment();return n=v.length,v.push({fragment:r,order:t,optgroup:e}),[n,r]};for(t=0;t<r;t++){var _=y.items[t];if(_){var x=_.id,S=h.options[x];if(void 0!==S){var C=Te(x),I=h.getOption(C,!0);for(h.settings.hideSelected||I.classList.toggle("selected",h.items.includes(C)),o=S[h.settings.optgroupField]||"",n=0,i=(s=Array.isArray(o)?o:[o])&&s.length;n<i;n++){o=s[n];var A=S.$order,L=h.optgroups[o];void 0===L?o="":A=L.$order;var F=e(p)(O(o,A),2),E=F[0],T=F[1];n>0&&(I=I.cloneNode(!0),he(I,{id:S.$id+"-clone-"+n,"aria-selected":null}),I.classList.add("ts-cloned"),le(I,"active"),h.activeOption&&h.activeOption.dataset.value==x&&u&&u.dataset.group===o.toString()&&(b=I)),T.appendChild(I),""!=o&&(f[o]=E)}}}}h.settings.lockOptgroupOrder&&v.sort((function(e,t){return e.order-t.order})),a=document.createDocumentFragment(),X(v,(function(e){var t=e.fragment,n=e.optgroup;if(t&&t.children.length){var i=h.optgroups[n];if(void 0!==i){var r=document.createDocumentFragment(),o=h.render("optgroup_header",i);Me(r,o),Me(r,t);var s=h.render("optgroup",{group:i,options:r});Me(a,s)}else Me(a,t)}})),k.innerHTML="",Me(k,a),h.settings.highlight&&(ye(k),y.query.length&&y.tokens.length&&X(y.tokens,(function(e){me(k,e.regex)})));var P=function(e){var t=h.render(e,{input:g});return t&&(w=!0,k.insertBefore(t,k.firstChild)),t};if(h.loading?P("loading"):h.settings.shouldLoad.call(h,g)?0===y.items.length&&P("no_results"):P("not_loading"),(l=h.canCreate(g))&&(c=P("option_create")),h.hasOptions=y.items.length>0||l,w){if(y.items.length>0){if(b||"single"!==h.settings.mode||null==h.items[0]||(b=h.getOption(h.items[0])),!k.contains(b)){var N=0;c&&!h.settings.addPrecedence&&(N=1),b=h.selectable()[N]}}else c&&(b=c);d&&!h.isOpen&&(h.open(),h.scrollToOption(b,"auto")),h.setActiveOption(b)}else h.clearActiveOption(),d&&h.isOpen&&h.close(!1)}},{key:"selectable",value:function(){return this.dropdown_content.querySelectorAll("[data-selectable]")}},{key:"addOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(Array.isArray(e))return n.addOptions(e,t),!1;var i=Ee(e[n.settings.valueField]);return null!==i&&!n.options.hasOwnProperty(i)&&(e.$order=e.$order||++n.order,e.$id=n.inputId+"-opt-"+e.$order,n.options[i]=e,n.lastQuery=null,t&&(n.userOptions[i]=t,n.trigger("option_add",i,e)),i)}},{key:"addOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;X(e,(function(e){n.addOption(e,t)}))}},{key:"registerOption",value:function(e){return this.addOption(e)}},{key:"registerOptionGroup",value:function(e){var t=Ee(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}},{key:"addOptionGroup",value:function(e,t){var n;t[this.settings.optgroupValueField]=e,(n=this.registerOptionGroup(t))&&this.trigger("optgroup_add",n,t)}},{key:"removeOptionGroup",value:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}},{key:"clearOptionGroups",value:function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}},{key:"updateOption",value:function(e,t){var n,i,r=this,o=Ee(e),s=Ee(t[r.settings.valueField]);if(null!==o){var a=r.options[o];if(null!=a){if("string"!=typeof s)throw new Error("Value must be set in option data");var l=r.getOption(o),u=r.getItem(o);if(t.$order=t.$order||a.$order,delete r.options[o],r.uncacheValue(s),r.options[s]=t,l){if(r.dropdown_content.contains(l)){var c=r._render("option",t);ge(l,c),r.activeOption===l&&r.setActiveOption(c)}l.remove()}u&&(-1!==(i=r.items.indexOf(o))&&r.items.splice(i,1,s),n=r._render("item",t),u.classList.contains("active")&&ae(n,"active"),ge(u,n)),r.lastQuery=null}}}},{key:"removeOption",value:function(e,t){var n=this;e=Te(e),n.uncacheValue(e),delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)}},{key:"clearOptions",value:function(e){var t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();var n={};X(this.options,(function(e,i){t(e,i)&&(n[i]=e)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}},{key:"clearFilter",value:function(e,t){return this.items.indexOf(t)>=0}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ee(e);if(null===n)return null;var i=this.options[n];if(null!=i){if(i.$div)return i.$div;if(t)return this._render("option",i)}return null}},{key:"getAdjacent",value:function(e,t){var n,i=this;if(!e)return null;n="item"==(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"option")?i.controlChildren():i.dropdown_content.querySelectorAll("[data-selectable]");for(var r=0;r<n.length;r++)if(n[r]==e)return t>0?n[r+1]:n[r-1];return null}},{key:"getItem",value:function(e){if("object"==typeof e)return e;var t=Ee(e);return null!==t?this.control.querySelector('[data-value="'.concat(Be(t),'"]')):null}},{key:"addItems",value:function(e,t){var n=this,i=Array.isArray(e)?e:[e],r=(i=i.filter((function(e){return-1===n.items.indexOf(e)})))[i.length-1];i.forEach((function(e){n.isPending=e!==r,n.addItem(e,t)}))}},{key:"addItem",value:function(e,t){var n=this;qe(this,t?[]:["change","dropdown_close"],(function(){var i,r,o=n,s=o.settings.mode,a=Ee(e);if((!a||-1===o.items.indexOf(a)||("single"===s&&o.close(),"single"!==s&&o.settings.duplicates))&&null!==a&&o.options.hasOwnProperty(a)&&("single"===s&&o.clear(t),"multi"!==s||!o.isFull())){if(i=o._render("item",o.options[a]),o.control.contains(i)&&(i=i.cloneNode(!0)),r=o.isFull(),o.items.splice(o.caretPos,0,a),o.insertAtCaret(i),o.isSetup){if(!o.isPending&&o.settings.hideSelected){var l=o.getOption(a),u=o.getAdjacent(l,1);u&&o.setActiveOption(u)}o.isPending||o.settings.closeAfterSelect||o.refreshOptions(o.isFocused&&"single"!==s),0!=o.settings.closeAfterSelect&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",a,i),o.isPending||o.updateOriginalInput({silent:t})}(!o.isPending||!r&&o.isFull())&&(o.inputState(),o.refreshState())}}))}},{key:"removeItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this;if(e=n.getItem(e)){var i,r,o=e.dataset.value;i=ve(e),e.remove(),e.classList.contains("active")&&(r=n.activeItems.indexOf(e),n.activeItems.splice(r,1),le(e,"active")),n.items.splice(i,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(o)&&n.removeOption(o,t),i<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:t}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",o,e)}}},{key:"createItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};3===arguments.length&&(n=arguments[2]),"function"!=typeof n&&(n=function(){});var i,r=this,o=r.caretPos;if(t=t||r.inputValue(),!r.canCreate(t))return n(),!1;r.lock();var s,a=!1,l=function(e){if(r.unlock(),!e||"object"!=typeof e)return n();var t=Ee(e[r.settings.valueField]);if("string"!=typeof t)return n();r.setTextboxValue(),r.addOption(e,!0),r.setCaret(o),r.addItem(t),n(e),a=!0};return"function"==typeof r.settings.create?i=r.settings.create.call(this,t,l):(s={},e(c)(s,r.settings.labelField,t),e(c)(s,r.settings.valueField,t),i=s),a||l(i),!0}},{key:"refreshItems",value:function(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}},{key:"refreshState",value:function(){var e=this;e.refreshValidityState();var t=e.isFull(),n=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);var i=e.wrapper.classList;i.toggle("focus",e.isFocused),i.toggle("disabled",e.isDisabled),i.toggle("readonly",e.isReadOnly),i.toggle("required",e.isRequired),i.toggle("invalid",!e.isValid),i.toggle("locked",n),i.toggle("full",t),i.toggle("input-active",e.isFocused&&!e.isInputHidden),i.toggle("dropdown-active",e.isOpen),i.toggle("has-options",fe(e.options)),i.toggle("has-items",e.items.length>0)}},{key:"refreshValidityState",value:function(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}},{key:"isFull",value:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}},{key:"updateOriginalInput",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,r=i.input.querySelector('option[value=""]');if(i.is_select_tag){var o=[],s=i.input.querySelectorAll("option:checked").length;function a(e,t,n){return e||(e=ne('<option value="'+Pe(t)+'">'+Pe(n)+"</option>")),e!=r&&i.input.append(e),o.push(e),(e!=r||s>0)&&(e.selected=!0),e}i.input.querySelectorAll("option:checked").forEach((function(e){e.selected=!1})),0==i.items.length&&"single"==i.settings.mode?a(r,"",""):i.items.forEach((function(n){e=i.options[n],t=e[i.settings.labelField]||"",o.includes(e.$option)?a(i.input.querySelector('option[value="'.concat(Be(n),'"]:not(:checked)')),n,t):e.$option=a(e.$option,n,t)}))}else i.input.value=i.getValue();i.isSetup&&(n.silent||i.trigger("change",i.getValue()))}},{key:"open",value:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,he(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),se(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),se(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&t.inputState()),t.isOpen=!1,he(t.focus_node,{"aria-expanded":"false"}),se(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),n&&t.trigger("dropdown_close",t.dropdown)}},{key:"positionDropdown",value:function(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),n=e.offsetHeight+t.top+window.scrollY,i=t.left+window.scrollX;se(this.dropdown,{width:t.width+"px",top:n+"px",left:i+"px"})}}},{key:"clear",value:function(e){var t=this;if(t.items.length){var n=t.controlChildren();X(n,(function(e){t.removeItem(e,!0)})),t.inputState(),e||t.updateOriginalInput(),t.trigger("clear")}}},{key:"insertAtCaret",value:function(e){var t=this,n=t.caretPos,i=t.control;i.insertBefore(e,i.children[n]||null),t.setCaret(n+1)}},{key:"deleteSelection",value:function(e){var t,n,i,r,o=this;t=e&&e.keyCode===Ce?-1:1,n=Ve(o.control_input);var s=[];if(o.activeItems.length)r=pe(o.activeItems,t),i=ve(r),t>0&&i++,X(o.activeItems,(function(e){return s.push(e)}));else if((o.isFocused||"single"===o.settings.mode)&&o.items.length){var a,l=o.controlChildren();t<0&&0===n.start&&0===n.length?a=l[o.caretPos-1]:t>0&&n.start===o.inputValue().length&&(a=l[o.caretPos]),void 0!==a&&s.push(a)}if(!o.shouldDelete(s,e))return!1;for(De(e,!0),void 0!==i&&o.setCaret(i);s.length;)o.removeItem(s.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}},{key:"shouldDelete",value:function(e,t){var n=e.map((function(e){return e.dataset.value}));return!(!n.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(n,t))}},{key:"advanceSelection",value:function(e,t){var n,i,r=this;r.rtl&&(e*=-1),r.inputValue().length||(Re(Le,t)||Re("shiftKey",t)?(i=(n=r.getLastActive(e))?n.classList.contains("active")?r.getAdjacent(n,e,"item"):n:e>0?r.control_input.nextElementSibling:r.control_input.previousElementSibling)&&(i.classList.contains("active")&&r.removeActiveItem(n),r.setActiveItemClass(i)):r.moveCaret(e))}},{key:"moveCaret",value:function(e){}},{key:"getLastActive",value:function(e){var t=this.control.querySelector(".last-active");if(t)return t;var n=this.control.querySelectorAll(".active");return n?pe(n,e):void 0}},{key:"setCaret",value:function(e){this.caretPos=this.items.length}},{key:"controlChildren",value:function(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}},{key:"lock",value:function(){this.setLocked(!0)}},{key:"unlock",value:function(){this.setLocked(!1)}},{key:"setLocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isReadOnly||this.isDisabled;this.isLocked=e,this.refreshState()}},{key:"disable",value:function(){this.setDisabled(!0),this.close()}},{key:"enable",value:function(){this.setDisabled(!1)}},{key:"setDisabled",value:function(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}},{key:"setReadOnly",value:function(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}},{key:"destroy",value:function(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,le(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}},{key:"render",value:function(e,t){var n,i,r=this;if("function"!=typeof this.settings.render[e])return null;if(!(i=r.settings.render[e].call(this,t,Pe)))return null;if(i=ne(i),"option"===e||"option_create"===e?t[r.settings.disabledField]?he(i,{"aria-disabled":"true"}):he(i,{"data-selectable":""}):"optgroup"===e&&(n=t.group[r.settings.optgroupValueField],he(i,{"data-group":n}),t.group[r.settings.disabledField]&&he(i,{"data-disabled":""})),"option"===e||"item"===e){var o=Te(t[r.settings.valueField]);he(i,{"data-value":o}),"item"===e?(ae(i,r.settings.itemClass),he(i,{"data-ts-item":""})):(ae(i,r.settings.optionClass),he(i,{role:"option",id:t.$id}),t.$div=i,r.options[o]=t)}return i}},{key:"_render",value:function(e,t){var n=this.render(e,t);if(null==n)throw"HTMLElement expected";return n}},{key:"clearCache",value:function(){X(this.options,(function(e){e.$div&&(e.$div.remove(),delete e.$div)}))}},{key:"uncacheValue",value:function(e){var t=this.getOption(e);t&&t.remove()}},{key:"canCreate",value:function(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}},{key:"hook",value:function(e,t,n){var i=this,r=i[t];i[t]=function(){var t,o;return"after"===e&&(t=r.apply(i,arguments)),o=n.apply(i,arguments),"instead"===e?o:("before"===e&&(t=r.apply(i,arguments)),t)}}}]),i}(r(i));function Qe(){var e=this;$e(this.input,"change",(function(){e.sync()}))}function Ue(t){var n=this,i=n.onOptionSelect;n.settings.hideSelected=!1;var r=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},t),o=function(t,n){var i,o,s,a;n?(t.checked=!0,r.uncheckedClassNames&&(i=t.classList).remove.apply(i,e(f)(r.uncheckedClassNames)),r.checkedClassNames&&(o=t.classList).add.apply(o,e(f)(r.checkedClassNames))):(t.checked=!1,r.checkedClassNames&&(s=t.classList).remove.apply(s,e(f)(r.checkedClassNames)),r.uncheckedClassNames&&(a=t.classList).add.apply(a,e(f)(r.uncheckedClassNames)))},s=function(e){setTimeout((function(){var t=e.querySelector("input."+r.className);t instanceof HTMLInputElement&&o(t,e.classList.contains("selected"))}),1)};n.hook("after","setupTemplates",(function(){var e=n.settings.render.option;n.settings.render.option=function(t,i){var s=ne(e.call(n,t,i)),a=document.createElement("input");r.className&&a.classList.add(r.className),a.addEventListener("click",(function(e){De(e)})),a.type="checkbox";var l=Ee(t[n.settings.valueField]);return o(a,!!(l&&n.items.indexOf(l)>-1)),s.prepend(a),s}})),n.on("item_remove",(function(e){var t=n.getOption(e);t&&(t.classList.remove("selected"),s(t))})),n.on("item_add",(function(e){var t=n.getOption(e);t&&s(t)})),n.hook("instead","onOptionSelect",(function(e,t){if(t.classList.contains("selected"))return t.classList.remove("selected"),n.removeItem(t.dataset.value),n.refreshOptions(),void De(e,!0);i.call(n,e,t),s(t)}))}function Je(e){var t=this,n=Object.assign({className:"clear-button",title:"Clear All",html:function(e){return'<div class="'.concat(e.className,'" title="').concat(e.title,'">&#10799;</div>')}},e);t.on("initialize",(function(){var e=ne(n.html(n));e.addEventListener("click",(function(e){t.isLocked||(t.clear(),"single"===t.settings.mode&&t.settings.allowEmptyOption&&t.addItem(""),e.preventDefault(),e.stopPropagation())})),t.control.appendChild(e)}))}var We=function(e,t){var n;null==(n=e.parentNode)||n.insertBefore(t,e.nextSibling)},Ye=function(e,t){var n;null==(n=e.parentNode)||n.insertBefore(t,e)},Xe=function(e,t){do{var n;if(e==(t=null==(n=t)?void 0:n.previousElementSibling))return!0}while(t&&t.previousElementSibling);return!1};function Ze(){var e=this;if("multi"===e.settings.mode){var t,n=e.lock,i=e.unlock,r=!0;e.hook("after","setupTemplates",(function(){var n=e.settings.render.item;e.settings.render.item=function(i,o){var s=ne(n.call(e,i,o));he(s,{draggable:"true"});var a=function(e){t=s,setTimeout((function(){s.classList.add("ts-dragging")}),0)},l=function(e){e.preventDefault(),s.classList.add("ts-drag-over"),c(s,t)},u=function(){s.classList.remove("ts-drag-over")},c=function(e,t){void 0!==t&&(Xe(t,s)?We(e,t):Ye(e,t))},d=function(){var n;document.querySelectorAll(".ts-drag-over").forEach((function(e){return e.classList.remove("ts-drag-over")})),null==(n=t)||n.classList.remove("ts-dragging"),t=void 0;var i=[];e.control.querySelectorAll("[data-value]").forEach((function(e){if(e.dataset.value){var t=e.dataset.value;t&&i.push(t)}})),e.setValue(i)};return $e(s,"mousedown",(function(e){r||De(e),e.stopPropagation()})),$e(s,"dragstart",a),$e(s,"dragenter",l),$e(s,"dragover",l),$e(s,"dragleave",u),$e(s,"dragend",d),s}})),e.hook("instead","lock",(function(){return r=!1,n.call(e)})),e.hook("instead","unlock",(function(){return r=!0,i.call(e)}))}}function et(e){var t=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a class="'+e.closeClass+'">&times;</a></div></div>'}},e);t.on("initialize",(function(){var e=ne(n.html(n)),i=e.querySelector("."+n.closeClass);i&&i.addEventListener("click",(function(e){De(e,!0),t.close()})),t.dropdown.insertBefore(e,t.dropdown.firstChild)}))}function tt(){var e=this;e.hook("instead","setCaret",(function(t){"single"!==e.settings.mode&&e.control.contains(e.control_input)?(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach((function(n,i){i<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)})):t=e.items.length,e.caretPos=t})),e.hook("instead","moveCaret",(function(t){if(e.isFocused){var n=e.getLastActive(t);if(n){var i=ve(n);e.setCaret(t>0?i+1:i),e.setActiveItem(),le(n,"last-active")}else e.setCaret(e.caretPos+t)}}))}function nt(){var e=this;e.settings.shouldOpen=!0,e.hook("before","setup",(function(){e.focus_node=e.control,ae(e.control_input,"dropdown-input");var t=ne('<div class="dropdown-input-wrap">');t.append(e.control_input),e.dropdown.insertBefore(t,e.dropdown.firstChild);var n=ne('<input class="items-placeholder" tabindex="-1" />');n.placeholder=e.settings.placeholder||"",e.control.append(n)})),e.on("initialize",(function(){e.control_input.addEventListener("keydown",(function(t){switch(t.keyCode){case ke:return e.isOpen&&(De(t,!0),e.close()),void e.clearActiveItems();case Ae:e.focus_node.tabIndex=-1}return e.onKeyDown.call(e,t)})),e.on("blur",(function(){e.focus_node.tabIndex=e.isDisabled?-1:e.tabIndex})),e.on("dropdown_open",(function(){e.control_input.focus()}));var t=e.onBlur;e.hook("instead","onBlur",(function(n){if(!n||n.relatedTarget!=e.control_input)return t.call(e)})),$e(e.control_input,"blur",(function(){return e.onBlur()})),e.hook("before","close",(function(){e.isOpen&&e.focus_node.focus({preventScroll:!0})}))}))}function it(){var e=this;e.on("initialize",(function(){var t=document.createElement("span"),n=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"],r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;t.style[u]=n.style[u]}}catch(e){o=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}var c=function(){t.textContent=n.value,n.style.width=t.clientWidth+"px"};c(),e.on("update item_add item_remove",c),$e(n,"input",c),$e(n,"keyup",c),$e(n,"blur",c),$e(n,"update",c)}))}function rt(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",(function(n){return!!e.activeItems.length&&t.call(e,n)}))}function ot(){this.hook("instead","setActiveItem",(function(){})),this.hook("instead","selectAll",(function(){}))}function st(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",(function(n){var i,r,o,s;if(!e.isOpen||n.keyCode!==Oe&&n.keyCode!==xe)return t.call(e,n);e.ignoreHover=!0,s=de(e.activeOption,"[data-group]"),i=ve(e.activeOption,"[data-selectable]"),s&&(s=n.keyCode===Oe?s.previousSibling:s.nextSibling)&&(r=(o=s.querySelectorAll("[data-selectable]"))[Math.min(o.length-1,i)])&&e.setActiveOption(r)}))}function at(e){var t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e),n=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Pe(t.title)+'">'+t.label+"</a>";n.hook("after","setupTemplates",(function(){var e=n.settings.render.item;n.settings.render.item=function(t,r){var o=ne(e.call(n,t,r)),s=ne(i);return o.appendChild(s),$e(s,"mousedown",(function(e){De(e,!0)})),$e(s,"click",(function(e){n.isLocked||(De(e,!0),n.isLocked||n.shouldDelete([o],e)&&(n.removeItem(o),n.refreshOptions(!1),n.inputState()))})),o}}))}}function lt(e){var t=this,n=Object.assign({text:function(e){return e[t.settings.labelField]}},e);t.on("item_remove",(function(e){if(t.isFocused&&""===t.control_input.value.trim()){var i=t.options[e];i&&t.setTextboxValue(n.text.call(t,i))}}))}function ut(){var e,t,n=this,i=n.canLoad,r=n.clearActiveOption,o=n.loadCallback,s={},a=!1,l=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=function(){if(e.clientHeight/(e.scrollHeight-e.scrollTop)>.9)return!0;if(n.activeOption){var t=n.selectable();if(Array.from(t).indexOf(n.activeOption)>=t.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];var u=function(t){return!("number"==typeof n.settings.maxOptions&&e.children.length>=n.settings.maxOptions||!(t in s)||!s[t])},c=function(e,t){return n.items.indexOf(t)>=0||l.indexOf(t)>=0};n.setNextUrl=function(e,t){s[e]=t},n.getUrl=function(e){if(e in s){var t=s[e];return s[e]=!1,t}return n.clearPagination(),n.settings.firstUrl.call(n,e)},n.clearPagination=function(){s={}},n.hook("instead","clearActiveOption",(function(){if(!a)return r.call(n)})),n.hook("instead","canLoad",(function(e){return e in s?u(e):i.call(n,e)})),n.hook("instead","loadCallback",(function(e,i){if(a){if(t){var r=e[0];void 0!==r&&(t.dataset.value=r[n.settings.valueField])}}else n.clearOptions(c);o.call(n,e,i),a=!1})),n.hook("after","refreshOptions",(function(){var i,r=n.lastValue;u(r)?(i=n.render("loading_more",{query:r}))&&(i.setAttribute("data-selectable",""),t=i):r in s&&!e.querySelector(".no-results")&&(i=n.render("no_more_results",{query:r})),i&&(ae(i,n.settings.optionClass),e.append(i))})),n.on("initialize",(function(){l=Object.keys(n.options),e=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:function(){return'<div class="loading-more-results">Loading more results ... </div>'},no_more_results:function(){return'<div class="no-more-results">No more results</div>'}},n.settings.render),e.addEventListener("scroll",(function(){n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(a||(a=!0,n.load.call(n,n.lastValue)))}))}))}return Ge.define("change_listener",Qe),Ge.define("checkbox_options",Ue),Ge.define("clear_button",Je),Ge.define("drag_drop",Ze),Ge.define("dropdown_header",et),Ge.define("caret_position",tt),Ge.define("dropdown_input",nt),Ge.define("input_autogrow",it),Ge.define("no_backspace_delete",rt),Ge.define("no_active_items",ot),Ge.define("optgroup_columns",st),Ge.define("remove_button",at),Ge.define("restore_on_backspace",lt),Ge.define("virtual_scroll",ut),Ge}();var m=document.querySelector(".breed-select"),y=document.getElementById("cat-image"),b=document.querySelector(".cat-info"),w=document.getElementById("breed-name"),k=document.getElementById("description"),O=document.getElementById("temperament");function _(){var e=m.options[m.selectedIndex].value;e&&((0,o.displayLoader)(),(0,o.fetchCatByBreed)(e).then((function(e){!function(e){y.src=e.url,w.textContent=e.breeds[0].name||"No description available",k.textContent=e.breeds[0].description||"No description available",O.textContent=e.breeds[0].temperament||"No information available",b.style.display="flex"}(e[0])})).catch((function(e){console.error("Error fetching cat data:",e),b.style.display="none"})).finally((function(){(0,o.notDisplayLoader)()})))}(0,o.displayLoader)(),m.style.display="none",b.style.display="none",(0,o.fetchBreeds)().then((function(t){(0,o.notDisplayLoader)(),function(t){var n=t.map((function(e){return{value:e.id,text:e.name}}));new(e(s))(m,{hideSelected:!1,options:n,placeholder:"Select a breed...",onChange:_,sortField:{field:"dropdown",direction:"asc"}})}(t),m.addEventListener("change",_)}))}();
//# sourceMappingURL=index.850b979c.js.map
